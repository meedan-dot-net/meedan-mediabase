@import base

=big_button
  +chunkybacon
  :background #fff url('/static/images/link.gif') no-repeat 95% 3px
  +dropshadow_light
  :padding 1em 5em 1em 1em
  :line-height 1.5
  :border= 3px solid !med_grey
  :clear both
  :margin 0 auto
  :display block
  :margin 1em auto
  :float left

// contains the primary actions
=action_header
  +columns(!bidi_full,!bidi_full)
  +dropshadow_light
  :background #fff
  :padding-top 20px
  h3
    :float left

// =============================
// = event detail layout mixin =
// =============================

=event_detail_layout
  #content
    +container
    :clear both
  #primary
    +columns(!bidi_full,!bidi_full)
    +dropshadow_light
    ul#event_helper
      :padding-top 2em
      :padding-bottom 2em
      :margin 0 auto
      :text-align center
      :float left
      :clear both
      :width 100%
      p#helper
        a
          :float right

    div#event_summary_block
      :margin 1em 0 2em 0
      :z-index 2
      +columns(22)
      +pad(1,1,24)
      h1
        +columns(!bidi_half,!bidi_full)
        :margin 0
        :padding 2em 0 0 0
        :height 150px
        :text-transform none
      h1.ar
        :float right
        +rtl
      h1.en
        :float left
      span.editor
        :clear both
        +columns(!bidi_full,!bidi_full)
        :float left
        :text-align center
        :padding-top 1em
      div#event_metadata
        p.event_summary_text
          +columns(!bidi_half,!bidi_full)
          :margin 0
          :clear none
          :padding 1em 0
        p.ar
          :float right
          +rtl
        p.en
          :float left
          :clear both

div#event_visuals
  div.caption_wrap
    img
      :width 90%
      :margin 10px
      :float right
  div.event_country
    img
      :display none

// =================================================================================
// =                             EVENT DETAIL HEADER OUTPUT                        =
// =================================================================================

body.event_detail
  +event_detail_layout
  #content
    :background #fff
  #primary
    +dropshadow_light
  h1
    :font-size= 2em!important
    :line-height 1.0em
    :color #444
    :font-weight normal
    :float left
  h1.ar
    :font-size 2.1em
  h2 
    +italic
    +full
  h3
    +alt_header
    +full
  p.event_summary_text 
    :font-size= !big
    +italic
    :padding 0
  span.editor
    :color= !med_grey
    a
      :color= !dark_grey
      :padding 2px
      :background #FFFD9C
      +rounded(5px)
      +hover-link
      &:hover
        :color= !light_grey
        :text-decoration none
  p.ar
    +rtl
    :font-style normal
    :padding 0
  p.en 
    :float left
    :clear both
  div#event_visuals
    div.caption_wrap 
      :font-size= !small
      :color= !med_grey
  #tertiary
    .feedlink
      :clear both
      :float left
      +chunkybacon
  a#show_links, a#hide_links
    +big_button



// ==========================================================================================
// =                                     Event Detail Comments                              =
// ==========================================================================================

// First we setup all of our mixins to account for the various states we have to cover: 
// 1. Setup English vs Arabic Content
// 2. Setup Original Comment vs Translated Comment
// 3. Setup Top Level Comment vs. Reply
// 4. Setup Counter-aligned Inner Content (the byline)
// 5. Setup etc
// ... then party!

=ltr_pointer
  :background #fff url("/static/images/bkgpoint_en.gif") no-repeat right
=rtl_pointer
  :background #fff url("/static/images/bkgpoint_ar.gif") repeat-y left
=rtl_shadow
  :background #fff url("/static/images/bkg_vert_ar.gif") repeat-y left
=ltr_shadow
  :background #fff url("/static/images/bkg_vert_en.gif") repeat-y right    

=inside_padding(!paddingside= "right")
  @if !paddingside == "right"
    :padding-right 2em
  @if !paddingside == "left"
    :padding-left 2em

=comment
  :margin 0
  :padding 0
  
=arabic_comment
  +omega
  +comment
  +rtl
  :float right

=english_comment
  +alpha
  +comment
  :float left
  
// ============================
// = weighted layout settings =
// =  preferring original language, outside justification, english on the left =
// = only used on comment detail, not the other bilingual stuff.
// ============================

//TBD refactor into a proper two language column mixin
// I started one and nicknamed it "bidi" layout above CGB
// This should be ported to the bidi layout

!primary_column_width= 13
!secondary_column_width= !primary_column_width - 2
!primary_inner_column_width= !primary_column_width - 2
!secondary_inner_column_width= !secondary_column_width

// ==========================
// = weighted layout mixins =
// ==========================

=primary_column
  +columns(!primary_column_width,24)
  :padding-bottom 3em!important

=secondary_column
  +columns(!secondary_column_width,24)
  :padding-bottom 2em!important

// ==========================
// = weighted layout fixins =
// ==========================
  
=byline
  :display block
  :margin 0
  :height= !byline_height
  :padding-top 0.5em
  a
    :clear none
  img
    :width 30px
=rtl_byline
  +byline
  :float left
  +inside_padding(right)
  a
    :float left
    +inside_padding(right)
  img
    :float left
    :padding-right 1em
    
=ltr_byline
  +byline
  :float right
  +inside_padding(left)
  a
    :float right
    +inside_padding(left)
  img
    :float right
    :padding-left 1em

=comment_body(!dir=left)
  :clear both
  :float= !dir
  :margin 0
  
// =====================================
// = shared between english and arabic =
// =====================================

div#comments
  :clear both
.original_comment
  +primary_column
  span.user a
    +inside_padding(right)
    +chunkybacon(!green, !green)
    :color #fff
.translated_comment
  +secondary_column
  span.user
  a
    :clear both
  
// ==================
// = arabic comment =
// ==================
.arabic_comment 
  .original_comment
    +arabic_comment
    +rtl_shadow
    span.user
      +rtl_pointer
      +rtl_byline
      +inside_padding(left)
      a
        +chunkybacon(!green,!green)
        :color #fff
    p
      +rtl
      +comment_body(right)
      :font-size= 1.5em
  .translated_comment 
    +english_comment
    +secondary_column
    span.user
      +ltr_byline
      a
        +chunkybacon(!dark_grey,!light_grey)
        :color= !med_grey  
    p
      +comment_body(left)
      +columns(!secondary_inner_column_width,!secondary_column_width)
    a.improve_translation
      :float left
      :padding 0 10px
      :margin 0 10px
      +superglue(bottom, left)
      +chunkybacon(!dark_grey,!light_grey)
      :color= !med_grey

// ===================
// = english comment =
// ===================
.english_comment 
  .original_comment
    +english_comment
    +ltr_shadow
    span.user
      +ltr_pointer
      +ltr_byline
      +inside_padding(right)
      a
        +chunkybacon(!green,!green)
        :color #fff
    p
      +comment_body(left)
      +columns(!primary_inner_column_width,!primary_column_width)
  .translated_comment
    +arabic_comment
    +secondary_column
    p
      +comment_body(right)
    span.user
      +rtl_byline
      a
        +chunkybacon(!dark_grey,!light_grey)
        +striped_background
        :color= !med_grey
    a.improve_translation
      :float right
      :padding 0 10px
      :margin 10px
      +superglue(top, left)
      :line-height 3em

// ===========
// = comment =
// ===========
  
div.comment
  :border-bottom= 1px solid !med_grey
  :background-color #cdcdcd
  +columns(17,17)
  +full
  :margin 0
  :height 100%
  :position relative

// =============
// = timestamp =
// =============

.timestamp
  :text-transform uppercase
  :color= !med_grey
  :line-height 3em
  :padding 0 1em
  
.response_actions
  li
    :float left
    :clear none
    a
      :text-transform uppercase
      :color= !med_grey
      :padding 0 1em

// =======================
// = improve translation =
// =======================
a.improve_translation
  :font-size= !small


// =================
// = add a comment =
// =================

=add_comment_layout
  :clear both
  :float left
  +columns(24,24)
  +pad(6,6)
  textarea
    :float left
    :clear both
    :height 10em  
    +columns(12,24)
  a.submit-button
    :float left
    :clear both
  span.helper_text
    :clear both
    :display inline
  input
    :clear none
  h3
    :clear both
    +columns(12,24)
    :float left
    :text-align left
    :clear both

div#add_comment
  +add_comment_layout
  +rounded
  h3.attachment_prompt 
    +image_header("link.gif")
  h3.comment_prompt 
    +image_header("comment_exclaim.jpg")
  a.submit-button 
    +anchor-button
  a
    :font-size 1.5em
    +chunkybacon(!orange, !bright_blue)
    :display inline
    :color #fff
    
  textarea
    :font-size= !big
    :font-family "helvetica neue", helvetica, arial, sans-serif
    :color= !base_mid
    +striped_background
  input
    :float left
    :font-size= !big
    :font-family "helvetica neue", helvetica, arial, sans-serif
    :color= !base_mid
  span.helper_text
    :float left
    :font-size= !big
    :margin-right .2em
    :letter-spacing .05em
    :line-height 1.5em


.indented_comment
  +pad(1,1)
  :width 100%!important
  :font-size !small

#tabs
  +tabs